
config uhttpd 'main'
	list listen_http '0.0.0.0:80'
	list listen_https '0.0.0.0:443'
	option home '/www'
	option rfc1918_filter '1'
	option max_requests '3'
	option max_connections '100'
	option cert '/etc/uhttpd.crt'
	option key '/etc/uhttpd.key'
	option cgi_prefix '/cgi-bin'
	option script_timeout '60'
	option network_timeout '30'
	option http_keepalive '20'
	option tcp_keepalive '1'
	option ubus_prefix '/ubus'

config uhttpd 'redirect'
	list listen_http '0.0.0.0:8080'
	option home '/usr/lib/portal/www-redir'
	option max_requests '3'
	option max_connections '100'
	option script_timeout '60'
	option network_timeout '30'
	option http_keepalive '0'
	# UCI doesn't support present-but-empty-string values, which is needed
	# for lua_prefix to hack uhttpd into passing all requests to lua.
	option args '-l "" -L /usr/lib/lua/portal/redirect.lua'

config uhttpd 'portal'
	list listen_http '0.0.0.0:8081'
	option home '/usr/lib/portal/www-portal'
	option max_requests '3'
	option max_connections '100'
	option script_timeout '60'
	option network_timeout '30'
	option lua_prefix '/cgi-bin'
	option lua_handler '/usr/lib/lua/portal/portal.lua'

config cert 'px5g'
	option days '730'
	option bits '1024'
	option country 'DE'
	option state 'Berlin'
	option location 'Berlin'
	option commonname 'OpenWrt'

